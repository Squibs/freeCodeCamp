# APIs and Microservices Projects

All these projects are a series of various microservices.

List of Projects:

- [Timestamp Microservice](#timestamp-microservice)
- [Request Header Parser Microservice](#request-header-parser-microservice)
- [URL Shortener Microservice](#url-shortener-microservice)
- [Exercise Tracker](#exercise-tracker)
- [File Metadata Microservice](#file-metadata-microservice)

---

## Timestamp Microservice

<p align="center"><img src="/Images/screenshots/screenshot-timestamp-microservice.png" height="400" alt="Screenshot of my Timestamp Microservice project."/></p>

<em>Completed November 3, 2022</em>

### [Timestamp Microservice](https://timestamp.sulph.repl.co/) (Click to view functional site)

[Link to files on replit](https://replit.com/@Sulph/timestamp#index.js)

[Link to backup files on GitHub](./squibs-timestamp-ms/)


The first *Back End Development and APIs Project* I completed for freeCodeCamp. This entire section of freeCodeCamp seemed to be quite short lesson wise. There was only a total of 34 lessons, before the projects were the only thing left to do.

This project reminded me of how much of a hassle it is to work with `Date` objects. In the future I will more than likely use a JavaScript library to hopefully make working with them a whole lot easier.

For this project we had to handle two different api routes: `/api` and `/api/:date`. Both return the same JSON object of format `{ "unix" : 1451001600000, "utc" : "Fri, 25 Dec 2015 00:00:00 GMT" }`. If no valid date is passed as a parameter we simply return `{ "error": "Invalid Date" }`.

The `/api` route was fairly straight forward, we just return the current time in both `unix` and `utc` formats. Just make a new `Date` and use the `Date.getTime()` method for `unix` and the `Date.toUTCString()` method for `utc`.

The `/api/:date` route was where the project got slightly tricky. We needed to handle any valid date string, which means we need to figure out a way to see if a string can become a valid date. I opted to right-away convert the string to a date object and store it. I then test if the string is just numbers with `regex` and if it is cast the string to a `Number` and overwrite the previously stored date object with a new date object. Finally I test if the date object is valid, and if not return the appropriate error JSON.

### Required *User Stories* for this project

- You should provide your own project, not the example URL.
- A request to `/api/:date?` with a valid date should return a JSON object with a `unix` key that is a Unix timestamp of the input date in milliseconds (as type Number)
- A request to `/api/:date?` with a valid date should return a JSON object with a `utc` key that is a string of the input date in the format: `Thu, 01 Jan 1970 00:00:00 GMT`
- A request to `/api/1451001600000` should return `{ unix: 1451001600000, utc: "Fri, 25 Dec 2015 00:00:00 GMT" }`
- Your project can handle dates that can be successfully parsed by `new Date(date_string)`
- If the input date string is invalid, the api returns an object having the structure `{ error : "Invalid Date" }`
- An empty date parameter should return the current time in a JSON object with a `unix` key
- An empty date parameter should return the current time in a JSON object with a `utc` key

---

## Request Header Parser Microservice

<p align="center"><img src="/Images/screenshots/screenshot-header-parser.png" height="400" alt="Screenshot of my Header Parser Microservice project."/></p>

<em>Completed November 4, 2022</em>

### [Request Header Parser Microservice](https://header-parser.sulph.repl.co/) (Click to view functional site)

[Link to files on replit](https://replit.com/@Sulph/header-parser#index.js)

[Link to backup files on GitHub](./squibs-header-parser-ms/)

Unfortunately I don't think I'll have much to say about this project.

Like the last project we need to handle a route, this time we are handling `/api/whoami`. This will return JSO with three key value pairs: `ipaddress` which will return the visitor's IP address, `language` which returns the natural language and locale that the client prefers, and finally `software` which returns information recording to the used application, operating system, and a few more details.

All of these can be retrieved using the `req` object. I this project off by simply `console.log`ging the `req` object and searching through the output for my IP. I then returned this information using `req.headers['x-forwarded-for']`. This was the same for the other information using: `req.headers['accept-language']` and `req.headers['user-agent']`.

This quickly ended the project, as this was accepted as solving all the user stories / requirements for this project.

I decided this was too simple and looked at the solutions other's created. Turns out `express` has the `req.get` method, which can generally do what I did above, just in a different format: `req.get('user-agent')`. I decided this is probably the better way to handle getting this information, as it is a built-in function.

Then one last change I made was retrieving the IP address in a different way. `Express` provides the `req.ip` property that contains the remote IP address of the request. However this returns the IP in the format similar to: `::fff:159.20.14.100`. To resolve this I set `app.enable('trust proxy')` so that `express` will attempt to determine the IP address of the client connected through "the front-facing proxy, or a series of proxies."

---

## URL Shortener Microservice

<p align="center"><img src="/Images/screenshots/" height="400" alt="Screenshot of my URL Shortener Microservice project."/></p>

<em>Completed November , 2022</em>

---

## Exercise Tracker

<p align="center"><img src="/Images/screenshots/" height="400" alt="Screenshot of my Exercise Tracker project."/></p>

<em>Completed November , 2022</em>

---

## File Metadata Microservice

<p align="center"><img src="/Images/screenshots/" height="400" alt="Screenshot of my File Metadata Microservice project."/></p>

<em>Completed November , 2022</em>
